{% extends "base.html" %}
{% block title %}Room Requests - Roomify{% endblock %}

{% block extra_css %}
<style>
.request-page {
    max-width: 950px;
    margin: 30px auto;
    padding: 25px;
    background: #fffdf9;
    border-radius: 16px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.10);
    font-family: 'Poppins', sans-serif;
}

.request-header {
    text-align: center;
    margin-bottom: 25px;
}

.request-header h2 {
    font-size: 2rem;
    color: #5c3d2e;
}

.request-card {
    background: #ffffff;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 12px;
    border-left: 6px solid #ce9a78;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}

.request-card h3 {
    margin: 0 0 10px;
    font-size: 1.3rem;
    color: #5c3d2e;
}

.req-info {
    font-size: 0.95rem;
    color: #444;
}

.req-buttons {
    margin-top: 15px;
    display: flex;
    gap: 12px;
}

.btn-accept {
    background: #4CAF50;
    padding: 10px 18px;
    border-radius: 8px;
    color: white;
    border: none;
    font-weight: 600;
    cursor: pointer;
}
.btn-accept:hover {
    background: #3d8b40;
}

.btn-reject {
    background: #ff6b6b;
    padding: 10px 18px;
    border-radius: 8px;
    color: white;
    border: none;
    font-weight: 600;
    cursor: pointer;
}
.btn-reject:hover {
    background: #e63946;
}

.no-requests {
    text-align: center;
    font-size: 1.1rem;
    color: #777;
    padding: 40px 10px;
}
.sidebar-menu {
  display: flex;
  flex-direction: column;
  gap: 14px;
  margin-top: 20px;
}

.sidebar-menu a {
  display: flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  padding: 10px 14px;
  border-radius: 8px;
  font-size: 18px;
  font-weight: 700;
  color: #5c3d2e;
  transition: background 0.3s, transform 0.2s;
}

</style>
{% endblock %}

{% block sidebar_filters %}
<nav class="sidebar-menu">
  <a href="{{ url_for('room.profile') }}">ğŸ  Dashboard</a>
  <a href="{{ url_for('room.profile') }}">ğŸ› Rooms</a>
  <a href="/rooms/hosted">ğŸ‘¥ Hosted Students</a>
  <a href="{{ url_for('room.view_requests') }}">ğŸ“© Requests</a>
</nav>
{% endblock %}

{% block content %}
<div class="request-page">

    <div class="request-header">
        <h2>ğŸ“© Room Requests</h2>
    </div>

    {% if requests and requests|length > 0 %}
    {% for req in requests %}
    <div class="request-card">

        <h3>{{ req.student_info.name }}</h3>
        <p>ğŸ“± {{ req.student_info.mobile }}</p>
        <p>ğŸ  {{ req.student_info.address }}</p>
        <p>ğŸ“ {{ req.student_info.college }}</p>

        <a href="{{ req.student_info.aadhaar_file }}" target="_blank">Aadhaar</a>
        <a href="{{ req.student_info.college_id_file }}" target="_blank">College ID</a>

        <div class="req-buttons">
            <form method="POST" action="{{ url_for('room.accept_request', room_id=room._id, request_id=req._id) }}">
              <button class="btn-accept">âœ” Accept</button>
            </form>
            <form method="POST" action="{{ url_for('room.reject_request', room_id=room._id, request_id=req._id) }}">
              <button class="btn-reject">âœ– Reject</button>
            </form>
        </div>

    </div>
    {% endfor %}
{% else %}
  <p class="no-requests">No pending requests.</p>
{% endif %}



</div>
{% endblock %}
